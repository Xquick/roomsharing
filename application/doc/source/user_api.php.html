<!doctype html>

<html lang="en">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="generator" content="PHPDoctor 2.0.5 (http://peej.github.com/phpdoctor/)">
<meta name="when" content="Mon, 28 Apr 2014 02:23:40 +0000">

<link rel="stylesheet" type="text/css" href="../stylesheet.css">
<link rel="start" href="../overview-summary.html">

<title>user_api.php (mojespolubydleni.cz)</title>

</head>
<body id="file" onload="parent.document.title=document.title;">

<div class="header">
<h1>Unknown</h1>
<ul>
<li><a href="../overview-summary.html">Overview</a></li>
<li>Package</li><li>Class</li><li>Tree</li><li><a href="../overview-files.html">Files</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../todo-list.html">Todo</a></li>
<li><a href="../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../index.html" target="_top">Frames</a>
<a href="../source\user_api.php.html" target="_top">No frames</a>
</div>
<hr>

<h1>user_api.php</h1>
<hr>

<a name="line1"></a><pre><?php
<a name="line2"></a>
<a name="line3"></a>class User_api extends CI_Controller
<a name="line4"></a>{
<a name="line5"></a>    public function __construct()
<a name="line6"></a>    {
<a name="line7"></a>        parent::__construct();
<a name="line8"></a>    }
<a name="line9"></a>
<a name="line10"></a>    /**
<a name="line11"></a>     * Function checkCurrentUser
<a name="line12"></a>     *
<a name="line13"></a>     *  zkontroluje, zda přihlášený uživatel je ten, kterého předáváme v parametru.
<a name="line14"></a>     *
<a name="line15"></a>     * @param (int) (userId) ID kontrolovaného uživatele
<a name="line16"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line17"></a>     */
<a name="line18"></a>    public function checkCurrentUser($userId)
<a name="line19"></a>    {
<a name="line20"></a>        echo json_encode($this->user_model->checkCurrentUser($userId), JSON_UNESCAPED_UNICODE);
<a name="line21"></a>    }
<a name="line22"></a>
<a name="line23"></a>
<a name="line24"></a>    /**
<a name="line25"></a>     * Function getUserInfo
<a name="line26"></a>     *
<a name="line27"></a>     *  vrací JSON informace o uživateli (student, parametry jeho filtru, věk, osobní informace).
<a name="line28"></a>     *<ul>
<a name="line29"></a>     * <li><b> student </b>- </li>
<a name="line30"></a>     * <li><b> user_id_pk </b>- </li>
<a name="line31"></a>     * <li><b> "firstname </b>- </li>
<a name="line32"></a>     * <li><b> lastname </b>- </li>
<a name="line33"></a>     * </ul>
<a name="line34"></a>     *
<a name="line35"></a>     * @param (int) (userId) ID uživatele
<a name="line36"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line37"></a>     */
<a name="line38"></a>    public function getUserInfo($userId) //!!!!!!!!!!!!DOIMPLEMENTOVAT !!!!!!!!!!!
<a name="line39"></a>    {
<a name="line40"></a>        echo json_encode($this->user_model->getUserInfo($userId), JSON_UNESCAPED_UNICODE);
<a name="line41"></a>    }
<a name="line42"></a>
<a name="line43"></a>    /**
<a name="line44"></a>     * Function getUserSettings
<a name="line45"></a>     *
<a name="line46"></a>     *  vrací JSON data nastavení filtru
<a name="line47"></a>     *<ul>
<a name="line48"></a>     *<li><b> setting_id_pk </b>- ID nastavení</li>
<a name="line49"></a>     *<li><b> user_id_fk </b>- ID uživatele</li>
<a name="line50"></a>     *<li><b> name </b>- jméno filtrované položky</li>
<a name="line51"></a>     *<li><b> type </b>- typ filtrované položky
<a name="line52"></a>     * <ul>
<a name="line53"></a>     * <li><b>0</b>- int</li>
<a name="line54"></a>     * <li><b>1</b>- char</li>
<a name="line55"></a>     * </ul>
<a name="line56"></a>     * </li>
<a name="line57"></a>     *<li><b> value_int </b>- integer hodnota dané filtrované položky </li>
<a name="line58"></a>     *<li><b> value_char </b>- character hodnota dané filtrované položky </li>
<a name="line59"></a>     * </ul>
<a name="line60"></a>     * @param (int) (userId) ID uživatele
<a name="line61"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line62"></a>     *
<a name="line63"></a>     */
<a name="line64"></a>    public function getUserSettings($userId)
<a name="line65"></a>    {
<a name="line66"></a>        echo json_encode($this->user_model->getUserSettings($userId), JSON_UNESCAPED_UNICODE);
<a name="line67"></a>    }
<a name="line68"></a>
<a name="line69"></a>    /**
<a name="line70"></a>     * Function getUserFollowedNum
<a name="line71"></a>     *
<a name="line72"></a>     *  vrací počet kampaní, které uživatel momentálně sleduje (má ve sledovaných).
<a name="line73"></a>     *
<a name="line74"></a>     * @param (int) (userId) ID uživatele
<a name="line75"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line76"></a>     */
<a name="line77"></a>    public function getUserFollowedNum($userId)
<a name="line78"></a>    {
<a name="line79"></a>        echo json_encode($this->user_model->getUserFollowedNum($userId), JSON_UNESCAPED_UNICODE);
<a name="line80"></a>    }
<a name="line81"></a>
<a name="line82"></a>    /**
<a name="line83"></a>     * Function getUserFollowersNum
<a name="line84"></a>     *
<a name="line85"></a>     *  vrací počet uživatelů, kteří sledují kampaně daného uživatele, uvedeného jako parametr této funkce
<a name="line86"></a>     *
<a name="line87"></a>     * @param (int) (userId)
<a name="line88"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line89"></a>     *
<a name="line90"></a>     */
<a name="line91"></a>    public function getUserFollowersNum($userId)
<a name="line92"></a>    {
<a name="line93"></a>        echo json_encode($this->user_model->getUserFollowersNum($userId), JSON_UNESCAPED_UNICODE);
<a name="line94"></a>    }
<a name="line95"></a>
<a name="line96"></a>    /**
<a name="line97"></a>     * Function getUserId
<a name="line98"></a>     *
<a name="line99"></a>     *  vrací ID momentálně přihlášeného uživatele.
<a name="line100"></a>     *
<a name="line101"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line102"></a>     *
<a name="line103"></a>     */
<a name="line104"></a>    public function getUserId()
<a name="line105"></a>    {
<a name="line106"></a>        echo json_encode($this->user_model->getUserId(), JSON_UNESCAPED_UNICODE);
<a name="line107"></a>    }
<a name="line108"></a>
<a name="line109"></a>
<a name="line110"></a>    /**
<a name="line111"></a>     * Function getActivity
<a name="line112"></a>     *
<a name="line113"></a>     *  vrací JSON data 10 posledních uživatelských aktivit
<a name="line114"></a>     * <ul>
<a name="line115"></a>     * <li><b> activity_id_pk </b>- ID aktivity v databázi
<a name="line116"></a>     * <li><b> ad_id_fk </b>- ID kampaně ke které se aktivita vztahuje
<a name="line117"></a>     * <li><b> user_id_fk </b>- ID uživatele, který aktivitu vytvořil
<a name="line118"></a>     * <li><b> activity_type </b>- typ aktivity (1-7)(1-komentář, 2-ohodnocení, 3-začal sledovat, 4-přestal sledovat, 5-vytvořil, 6-aktivoval, 7-deaktivoval, 8-editoval)
<a name="line119"></a>     * <li><b> activity_value_char </b>- extra popis k aktivitě
<a name="line120"></a>     * <li><b> activity_value_int </b>- extra hodnota k aktivitě
<a name="line121"></a>     * <li><b> time_inserted </b>- SATUM vytvoření aktivity
<a name="line122"></a>     * </ul>
<a name="line123"></a>     *
<a name="line124"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line125"></a>     */
<a name="line126"></a>    public function getActivity()
<a name="line127"></a>    {
<a name="line128"></a>        echo json_encode($this->user_model->getActivity(), JSON_UNESCAPED_UNICODE);
<a name="line129"></a>    }
<a name="line130"></a>
<a name="line131"></a>    /**
<a name="line132"></a>     * Function getUserConversations
<a name="line133"></a>     *
<a name="line134"></a>     *  vrací JSON všech uživatelů, se kterými vedl aktuálně přihlášený uživatel konverzace.
<a name="line135"></a>     *
<a name="line136"></a>     * <ul>
<a name="line137"></a>     * <li><b> user_id_fk </b> - ID uživatele, se kterým je konverzace vedena</li>
<a name="line138"></a>     * <li><b> conversation_id_fk    </b> - ID konverzace </li>
<a name="line139"></a>     * <li><b> firstname </b> - křestní jméno uživatele, se kterým je konverzace vedena</li>
<a name="line140"></a>     * <li><b> lastname </b> - příjmení uživatele, se kterým je konverzace vedena</li>
<a name="line141"></a>     * <li><b> email </b> - email uživatele, se kterým je konverzace vedena</li>
<a name="line142"></a>     * <li><b> student </b> - informace o tom, zda je uživatel student</li>
<a name="line143"></a>     * </ul>
<a name="line144"></a>     *
<a name="line145"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line146"></a>     */
<a name="line147"></a>    public function getUserConversations()
<a name="line148"></a>    {
<a name="line149"></a>        echo json_encode($this->user_model->getUserConversations(), JSON_UNESCAPED_UNICODE);
<a name="line150"></a>    }
<a name="line151"></a>
<a name="line152"></a>    /**
<a name="line153"></a>     * Function getSimilarUsers
<a name="line154"></a>     *
<a name="line155"></a>     *  vrací JSON podobné uživatele, na základě uživatelova aktuálního filtru, který má nastavený.
<a name="line156"></a>     *
<a name="line157"></a>     * <ul>
<a name="line158"></a>     * <li><b> user_id_pk </b> - ID uživatele</li>
<a name="line159"></a>     * <li><b> firstname </b> - křestní jméno uživatele</li>
<a name="line160"></a>     * <li><b> lastname </b> - příjmení uživatele</li>
<a name="line161"></a>     * <li><b> email </b> - email uživatele</li>
<a name="line162"></a>     * <li><b> student </b> - informace o tom, zda je uživatel student</li>
<a name="line163"></a>     * <li><b> setting_id_pk </b> - ID nastavení uživatelova filtru</li>
<a name="line164"></a>     * <li><b> name </b> - název sublokality, na základě které mají uživatelé shodnu</li>
<a name="line165"></a>     * <li><b> value_char </b> - hodnota sublokality, na základě které mají uživatelé shodu (Praha 6, apod.)</li>
<a name="line166"></a>     * </ul>
<a name="line167"></a>     *
<a name="line168"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line169"></a>     */
<a name="line170"></a>    public function getSimilarUsers()
<a name="line171"></a>    {
<a name="line172"></a>        echo json_encode($this->user_model->getSimilarUsers(), JSON_UNESCAPED_UNICODE);
<a name="line173"></a>    }
<a name="line174"></a>
<a name="line175"></a>    /**
<a name="line176"></a>     * Function getMessageCount
<a name="line177"></a>     *
<a name="line178"></a>     *  vrací JSON počet nových zpráv, které uživatel obdržel.
<a name="line179"></a>     * Na indexu 0 je celkový počet nových zpráv
<a name="line180"></a>     * každý další index je ID uživatele, od kterého přišla zpráva
<a name="line181"></a>     *
<a name="line182"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line183"></a>     */
<a name="line184"></a>    public function getMessageCount()
<a name="line185"></a>    {
<a name="line186"></a>        echo json_encode($this->user_model->getMessageCount(), JSON_UNESCAPED_UNICODE);
<a name="line187"></a>    }
<a name="line188"></a>
<a name="line189"></a>    /**
<a name="line190"></a>     * Function getMessages
<a name="line191"></a>     * <ul>
<a name="line192"></a>     * <li><b> conversation_reply_id_pk </b> - ID odpovědi konverzace</li>
<a name="line193"></a>     * <li><b> reply </b> - text odpovědi konverzace</li>
<a name="line194"></a>     * <li><b> user_id_fk </b> - ID uživatele,který zprávu posílal </li>
<a name="line195"></a>     * <li><b> ip </b> - IP adresa uživatele, který zprávu odesílal </li>
<a name="line196"></a>     * <li><b> conversation_id_fk </b> - ID konverzace, do které zprávy patří (dotazovaná konverzace) </li>
<a name="line197"></a>     * <li><b> time </b> - čas odelání zprávy </li>
<a name="line198"></a>     * <li><b> status </b> - status zprávy
<a name="line199"></a>     * <ul>
<a name="line200"></a>     * <li><b> 0 </b> -přečtená </li>
<a name="line201"></a>     * <li><b> 1 </b> -nepřečtená </li>
<a name="line202"></a>     * </ul>
<a name="line203"></a>     * </li>
<a name="line204"></a>     * </ul>
<a name="line205"></a>     *
<a name="line206"></a>     *  vrací JSON výpis zpráv dané konverzace
<a name="line207"></a>     *
<a name="line208"></a>     * @param (int) (conversationId) ID konverzace, ze které chceme dostat zprávy
<a name="line209"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line210"></a>     */
<a name="line211"></a>    public function getMessages($conversationId)
<a name="line212"></a>    {
<a name="line213"></a>        echo json_encode($this->user_model->getMessages($conversationId), JSON_UNESCAPED_UNICODE);
<a name="line214"></a>    }
<a name="line215"></a>
<a name="line216"></a>    /**
<a name="line217"></a>     * Function verifyLastUserConversation
<a name="line218"></a>     *
<a name="line219"></a>     *  vrací potvrzení, zda uživatel, získávající patří do konverzace
<a name="line220"></a>     * možné použití v případě, kdy se uživatel pokouší získat konverzaci a my chceme ověřit, zda na to má nárok
<a name="line221"></a>     *
<a name="line222"></a>     * @param (int) (conversationId) ID konverzace, ze které chceme dostat zprávy
<a name="line223"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line224"></a>     */
<a name="line225"></a>    public function verifyLastUserConversation($conversationId)
<a name="line226"></a>    {
<a name="line227"></a>        echo json_encode($this->user_model->verifyLastUserConversation($conversationId), JSON_UNESCAPED_UNICODE);
<a name="line228"></a>    }
<a name="line229"></a>
<a name="line230"></a>    /**
<a name="line231"></a>     * Function zeroOutMessageCount
<a name="line232"></a>     *
<a name="line233"></a>     *  nastaví status konverzace
<a name="line234"></a>     * přijímá GET parametr "value", který může nabývat dvou hodnot (0, 1). Hodnotu může vždy nastavit vždy uživatel,
<a name="line235"></a>     * který byl posledním  účastníkem konverzace
<a name="line236"></a>     *<ul>
<a name="line237"></a>     * <li><b> 0 </b> - přečtená</li>
<a name="line238"></a>     * <li><b> 1 </b>- nepřečtená</li>
<a name="line239"></a>     *</ul>
<a name="line240"></a>     * @param (int) (conversationId) ID konverzace, které nastavujeme status
<a name="line241"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line242"></a>     */
<a name="line243"></a>    public function setConversationStatus($conversationId)
<a name="line244"></a>    {
<a name="line245"></a>        $value = $this->input->get('value');
<a name="line246"></a>        $this->user_model->setConversationStatus($conversationId, $value);
<a name="line247"></a>    }
<a name="line248"></a>
<a name="line249"></a>    /**
<a name="line250"></a>     * Function getFollowedAds
<a name="line251"></a>     *
<a name="line252"></a>     *  vrací JSON data všech kampaní, které uživatel má ve sledovaných
<a name="line253"></a>     *
<a name="line254"></a>     * <ul>
<a name="line255"></a>     * <li><b> ad_id_pk </b> - ID kampaně</li>
<a name="line256"></a>     * <li><b> user_id_fk </b> - ID uživatele, který kampaň vytvořil</li>
<a name="line257"></a>     * <li><b> object_id_fk </b> - ID objektu, na který je kampaň vytvořena </li>
<a name="line258"></a>     * <li><b> ad_title </b> - textovýtitulek kampaně </li>
<a name="line259"></a>     * <li><b> ad_body </b> - textový popis kampaně </li>
<a name="line260"></a>     * <li><b> ad_price </b> - cena kampaně </li>
<a name="line261"></a>     * <li><b> active </b> - aktivní či neaktivní kampaň
<a name="line262"></a>     * <ul>
<a name="line263"></a>     * <li><b> 0 </b> - neaktivní </li>
<a name="line264"></a>     * <li><b> 1 </b> - aktivní </li>
<a name="line265"></a>     * </ul>
<a name="line266"></a>     * </li>
<a name="line267"></a>     * <li><b> rel_type_id_fk </b> - </li>
<a name="line268"></a>     * <li><b> location_id_fk </b> - ID lokace objektu, na který je kampaň vytvořena </li>
<a name="line269"></a>     * <li><b> floor </b> - patro, ve které se nachází objekt, na který je kampaň umístěna </li>
<a name="line270"></a>     * <li><b> floor_area </b> - rozloha objektu </li>
<a name="line271"></a>     * <li><b> reconstruction_date</b> - datum rekonstrukce objektu </li>
<a name="line272"></a>     * <li><b> heat_type_id_fk </b> - ID typu topení
<a name="line273"></a>     * <ul>
<a name="line274"></a>     * <li><b> 0 </b> - plynové </li>
<a name="line275"></a>     * <li><b> 1 </b> - elektrické </li>
<a name="line276"></a>     * </ul>
<a name="line277"></a>     * </li>
<a name="line278"></a>     * <li><b> construction_type_id_fk </b> - ID typu konstrukce objektu
<a name="line279"></a>     * <ul>
<a name="line280"></a>     * <li><b> 0 </b> - panelová </li>
<a name="line281"></a>     * <li><b> 1 </b> - cihlová </li>
<a name="line282"></a>     * </ul>
<a name="line283"></a>     * </li>
<a name="line284"></a>     * <li><b> floor_count </b> - počet pater objektu </li>
<a name="line285"></a>     * <li><b> pet </b> - možnost domácího zvířete v objektu
<a name="line286"></a>     * <ul>
<a name="line287"></a>     * <li><b> 0 </b> - nesmí být </li>
<a name="line288"></a>     * <li><b> 1 </b> - může být </li>
<a name="line289"></a>     * </ul>
<a name="line290"></a>     * </li>
<a name="line291"></a>     * <li><b> smoker </b> - možnost kouření v objektu
<a name="line292"></a>     * <ul>
<a name="line293"></a>     * <li><b> 0 </b> - nesmí se kouřit </li>
<a name="line294"></a>     * <li><b> 1 </b> - může se kouřit </li>
<a name="line295"></a>     * </ul>
<a name="line296"></a>     * </li>
<a name="line297"></a>     * <li><b> date_inserted </b> - datum vložení kampaně</li>
<a name="line298"></a>     * <li><b> address </b> - neformátovaná adresa objektu </li>
<a name="line299"></a>     * <li><b> country </b> - adresa - země </li>
<a name="line300"></a>     * <li><b> locality </b> - adresa lokalita (Praha, Brno) </li>
<a name="line301"></a>     * <li><b> neighborhood </b> - adresa - městská čtvrť (Dejvice, Vinohrady) </li>
<a name="line302"></a>     * <li><b> postal_code </b> - adresa - PSČ </li>
<a name="line303"></a>     * <li><b> postal_town </b> - adresa - městská část (Praha 6, Praha 2) </li>
<a name="line304"></a>     * <li><b> route </b> - adresa - ulice </li>
<a name="line305"></a>     * <li><b> street_number </b> - adresa - číslo domu </li>
<a name="line306"></a>     * <li><b> sublocality </b> - adresa - podoblast (Praha 6, Praha 2) </li>
<a name="line307"></a>     * <li><b> administrative_area_level_1 </b> - adresa - kraj </li>
<a name="line308"></a>     * <li><b> administrative_area_level_2 </b> - adresa - okres </li>
<a name="line309"></a>     * <li><b> premise </b> - adresa - orientační číslo </li>
<a name="line310"></a>     * <li><b> establishment </b> - adresa - upřesnění typu budovy </li>
<a name="line311"></a>     * <li><b> point_of_interest </b> - adresa - památka </li>
<a name="line312"></a>     * <li><b> lat </b> - adresa - zeměpisná šířka </li>
<a name="line313"></a>     * <li><b> lng </b> - adresa - zeměpisná délka </li>
<a name="line314"></a>     * </ul>
<a name="line315"></a>     *
<a name="line316"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line317"></a>     */
<a name="line318"></a>    public function getFollowedAds()
<a name="line319"></a>    {
<a name="line320"></a>        echo json_encode($this->user_model->getFollowedAds(), JSON_UNESCAPED_UNICODE);
<a name="line321"></a>    }
<a name="line322"></a>
<a name="line323"></a>    /**
<a name="line324"></a>     * Function getTmpRooms
<a name="line325"></a>     *
<a name="line326"></a>     *  vrací JSON data místností, které uživatel naposledy nastavil v tvorbě nového objektu a nedokončil tvorbu.
<a name="line327"></a>     *<ul>
<a name="line328"></a>     * <li><b> tmp_object_rooms_id_pk </b> - ID temp. místnosti uživatele </li>
<a name="line329"></a>     * <li><b> user_id_fk </b> - ID uživatele </li>
<a name="line330"></a>     * <li><b> room_id_fk </b> - ID typu místnosti </li>
<a name="line331"></a>     * <li><b> room_count </b> - počet místností tohoto typu </li>
<a name="line332"></a>     * <li><b> room_name </b> - název typu místnosti </li>
<a name="line333"></a>     * </ul>
<a name="line334"></a>     *
<a name="line335"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line336"></a>     */
<a name="line337"></a>    public function getTmpRooms()
<a name="line338"></a>    {
<a name="line339"></a>        echo json_encode($this->user_model->getTmpRooms(), JSON_UNESCAPED_UNICODE);
<a name="line340"></a>    }
<a name="line341"></a>
<a name="line342"></a>
<a name="line343"></a>    /**
<a name="line344"></a>     * Function getTmpRooms
<a name="line345"></a>     *
<a name="line346"></a>     *  vrací JSON data vybavení, které uživatel naposledy nastavil v tvorbě nového objektu a nedokončil tvorbu.
<a name="line347"></a>     *<ul>
<a name="line348"></a>     * <li><b> tmp_object_equipment_id_pk </b> - ID temp. vybavení objektu </li>
<a name="line349"></a>     * <li><b> user_id_fk </b> - ID uživatele </li>
<a name="line350"></a>     * <li><b> equipment_id_fk </b> - ID typu vybavení objektu </li>
<a name="line351"></a>     * <li><b> equipment_name </b> - název typu vybavení </li>
<a name="line352"></a>     * </ul>
<a name="line353"></a>     *
<a name="line354"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line355"></a>     */
<a name="line356"></a>    public function getTmpEquipment()
<a name="line357"></a>    {
<a name="line358"></a>        echo json_encode($this->user_model->getTmpEquipment(), JSON_UNESCAPED_UNICODE);
<a name="line359"></a>    }
<a name="line360"></a>
<a name="line361"></a>
<a name="line362"></a>    /**
<a name="line363"></a>     * Function getRoomTypes
<a name="line364"></a>     *
<a name="line365"></a>     *  vrací JSON typy místností
<a name="line366"></a>     *
<a name="line367"></a>     * <ul>
<a name="line368"></a>     * <li><b> room_id_pk </b> - ID typu místnosti</li>
<a name="line369"></a>     * <li><b> room_name </b> - název místnosti </li>
<a name="line370"></a>     * </ul>
<a name="line371"></a>     *
<a name="line372"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line373"></a>     *
<a name="line374"></a>     */
<a name="line375"></a>    public function getRoomTypes()
<a name="line376"></a>    {
<a name="line377"></a>        echo json_encode($this->ad_model->getRoomTypes(), JSON_UNESCAPED_UNICODE);
<a name="line378"></a>    }
<a name="line379"></a>
<a name="line380"></a>    /**
<a name="line381"></a>     * Function getHeatType
<a name="line382"></a>     * <ul>
<a name="line383"></a>     * <li><b> room_id_pk </b> - ID typu topení</li>
<a name="line384"></a>     * <li><b> room_name </b> - název topení </li>
<a name="line385"></a>     * </ul>
<a name="line386"></a>     *  vrací JSON typy topení.
<a name="line387"></a>     *
<a name="line388"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line389"></a>     */
<a name="line390"></a>    public function getHeatType()
<a name="line391"></a>    {
<a name="line392"></a>        echo json_encode($this->object_model->getHeatType(), JSON_UNESCAPED_UNICODE);
<a name="line393"></a>    }
<a name="line394"></a>
<a name="line395"></a>    /**
<a name="line396"></a>     * Function getConstructionType
<a name="line397"></a>     * <ul>
<a name="line398"></a>     * <li><b> room_id_pk </b> - ID typu konstrukce</li>
<a name="line399"></a>     * <li><b> room_name </b> - název konstrukce </li>
<a name="line400"></a>     * </ul>
<a name="line401"></a>     *  vrací JSON typy konstrukcí objektů.
<a name="line402"></a>     *
<a name="line403"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line404"></a>     */
<a name="line405"></a>    public function getConstructionType()
<a name="line406"></a>    {
<a name="line407"></a>        echo json_encode($this->object_model->getConstructionType(), JSON_UNESCAPED_UNICODE);
<a name="line408"></a>    }
<a name="line409"></a>
<a name="line410"></a>    /**
<a name="line411"></a>     * Function getEquipment
<a name="line412"></a>     * <ul>
<a name="line413"></a>     * <li><b> room_id_pk </b> - ID typu vybavení</li>
<a name="line414"></a>     * <li><b> room_name </b> - název vybavení </li>
<a name="line415"></a>     * </ul>
<a name="line416"></a>     *  vrací JSON typy vybavení místností
<a name="line417"></a>     *
<a name="line418"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line419"></a>     */
<a name="line420"></a>    public function getEquipment()
<a name="line421"></a>    {
<a name="line422"></a>        echo json_encode($this->object_model->getEquipment(), JSON_UNESCAPED_UNICODE);
<a name="line423"></a>    }
<a name="line424"></a>
<a name="line425"></a>
<a name="line426"></a>    /**
<a name="line427"></a>     * Function getFormattedFilter
<a name="line428"></a>     *
<a name="line429"></a>     *  vrací JSON filtr uživatele pouze s hodnotami
<a name="line430"></a>     * <ul>
<a name="line431"></a>     * <li><b> address </b>- adresa filtru </li>
<a name="line432"></a>     * <li><b> price_from </b>- cena od </li>
<a name="line433"></a>     * <li><b> price_to </b>- cena do </li>
<a name="line434"></a>     * </ul>
<a name="line435"></a>     *
<a name="line436"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line437"></a>     */
<a name="line438"></a>    public function getFormattedFilter()
<a name="line439"></a>    {
<a name="line440"></a>        echo json_encode($this->user_model->getFormattedFilter(), JSON_UNESCAPED_UNICODE);
<a name="line441"></a>    }
<a name="line442"></a>
<a name="line443"></a>    /**
<a name="line444"></a>     * Function getFilter
<a name="line445"></a>     *
<a name="line446"></a>     *  vrací JSON kompletní filtr uživatele
<a name="line447"></a>     * <ul>
<a name="line448"></a>     * <li><b> address </b>- adresa filtru </li>
<a name="line449"></a>     * <li><b>  country </b>- země </li>
<a name="line450"></a>     * <li><b> locality </b>- město (Praha, Hradec Králové, apod) </li>
<a name="line451"></a>     * <li><b> sublocality </b>- užší lokalita, městská čtvrť (Praha 6, apod) </li>
<a name="line452"></a>     * <li><b> postal_code </b>- PSČ </li>
<a name="line453"></a>     * <li><b> route </b>- ulice </li>
<a name="line454"></a>     * <li><b> price_from </b>- cena od </li>
<a name="line455"></a>     * <li><b> price_to </b>- cena do </li>
<a name="line456"></a>     * </ul>
<a name="line457"></a>     *
<a name="line458"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line459"></a>     */
<a name="line460"></a>    public function getFilter()
<a name="line461"></a>    {
<a name="line462"></a>        echo json_encode($this->user_model->getFilter(), JSON_UNESCAPED_UNICODE);
<a name="line463"></a>    }
<a name="line464"></a>
<a name="line465"></a>    /**
<a name="line466"></a>     * Function getObjects
<a name="line467"></a>     *
<a name="line468"></a>     *  vrací JSON všechny objekty v databázy (byty, domy)
<a name="line469"></a>     *
<a name="line470"></a>     * <ul>
<a name="line471"></a>     * <li><b> object_id_pk </b>- ID objektu </li>
<a name="line472"></a>     * <li><b>  location_id_fk </b>- ID lokality </li>
<a name="line473"></a>     * <li><b> floor </b>- patro ve kterém se objekt případně nachází </li>
<a name="line474"></a>     * <li><b> floor_area </b>- rozloha objektu v metrech čtverečných </li>
<a name="line475"></a>     * <li><b> reconstruction_date </b>- datum rekonstrukce </li>
<a name="line476"></a>     * <li><b> heat_type_id_fk </b> - ID typu topení
<a name="line477"></a>     * <ul>
<a name="line478"></a>     * <li><b> 0 </b> - plynové </li>
<a name="line479"></a>     * <li><b> 1 </b> - elektrické </li>
<a name="line480"></a>     * </ul>
<a name="line481"></a>     * </li>
<a name="line482"></a>     * <li><b> construction_type_id_fk </b> - ID typu konstrukce objektu
<a name="line483"></a>     * <ul>
<a name="line484"></a>     * <li><b> 0 </b> - panelová </li>
<a name="line485"></a>     * <li><b> 1 </b> - cihlová </li>
<a name="line486"></a>     * </ul>
<a name="line487"></a>     * </li>
<a name="line488"></a>     * <li><b> floor_count </b> - počet pater objektu </li>
<a name="line489"></a>     * <li><b> pet </b> - možnost domácího zvířete v objektu
<a name="line490"></a>     * <ul>
<a name="line491"></a>     * <li><b> 0 </b> - nesmí být </li>
<a name="line492"></a>     * <li><b> 1 </b> - může být </li>
<a name="line493"></a>     * </ul>
<a name="line494"></a>     * </li>
<a name="line495"></a>     * <li><b> smoker </b> - možnost kouření v objektu
<a name="line496"></a>     * <ul>
<a name="line497"></a>     * <li><b> 0 </b> - nesmí se kouřit </li>
<a name="line498"></a>     * <li><b> 1 </b> - může se kouřit </li>
<a name="line499"></a>     * </ul>
<a name="line500"></a>     * </li>
<a name="line501"></a>     * <li><b> date_inserted </b>- datum vložení objektu do databáze </li>
<a name="line502"></a>     * </ul>
<a name="line503"></a>     *
<a name="line504"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line505"></a>     */
<a name="line506"></a>    public function getObjects()
<a name="line507"></a>    {
<a name="line508"></a>        echo json_encode($this->user_model->getObjects(), JSON_UNESCAPED_UNICODE);
<a name="line509"></a>    }
<a name="line510"></a>
<a name="line511"></a>    /**
<a name="line512"></a>     * Function getFilteredAds
<a name="line513"></a>     *
<a name="line514"></a>     *  vrací JSON všechny kampaně, které odpovídají uživatelově filtru
<a name="line515"></a>     * <ul>
<a name="line516"></a>     * <li><b> ad_id_pk </b> - ID kampaně</li>
<a name="line517"></a>     * <li><b> user_id_fk </b> - ID uživatele, který kampaň vytvořil</li>
<a name="line518"></a>     * <li><b> object_id_fk </b> - ID objektu, na který je kampaň vytvořena </li>
<a name="line519"></a>     * <li><b> ad_title </b> - textovýtitulek kampaně </li>
<a name="line520"></a>     * <li><b> ad_body </b> - textový popis kampaně </li>
<a name="line521"></a>     * <li><b> ad_price </b> - cena kampaně </li>
<a name="line522"></a>     * <li><b> active </b> - aktivní či neaktivní kampaň
<a name="line523"></a>     * <ul>
<a name="line524"></a>     * <li><b> 0 </b> - neaktivní </li>
<a name="line525"></a>     * <li><b> 1 </b> - aktivní </li>
<a name="line526"></a>     * </ul>
<a name="line527"></a>     * </li>
<a name="line528"></a>     * <li><b> rel_type_id_fk </b> - </li>
<a name="line529"></a>     * <li><b> location_id_fk </b> - ID lokace objektu, na který je kampaň vytvořena </li>
<a name="line530"></a>     * <li><b> floor </b> - patro, ve které se nachází objekt, na který je kampaň umístěna </li>
<a name="line531"></a>     * <li><b> floor_area </b> - rozloha objektu </li>
<a name="line532"></a>     * <li><b> reconstruction_date</b> - datum rekonstrukce objektu </li>
<a name="line533"></a>     * <li><b> heat_type_id_fk </b> - ID typu topení
<a name="line534"></a>     * <ul>
<a name="line535"></a>     * <li><b> 0 </b> - plynové </li>
<a name="line536"></a>     * <li><b> 1 </b> - elektrické </li>
<a name="line537"></a>     * </ul>
<a name="line538"></a>     * </li>
<a name="line539"></a>     * <li><b> construction_type_id_fk </b> - ID typu konstrukce objektu
<a name="line540"></a>     * <ul>
<a name="line541"></a>     * <li><b> 0 </b> - panelová </li>
<a name="line542"></a>     * <li><b> 1 </b> - cihlová </li>
<a name="line543"></a>     * </ul>
<a name="line544"></a>     * </li>
<a name="line545"></a>     * <li><b> floor_count </b> - počet pater objektu </li>
<a name="line546"></a>     * <li><b> pet </b> - možnost domácího zvířete v objektu
<a name="line547"></a>     * <ul>
<a name="line548"></a>     * <li><b> 0 </b> - nesmí být </li>
<a name="line549"></a>     * <li><b> 1 </b> - může být </li>
<a name="line550"></a>     * </ul>
<a name="line551"></a>     * </li>
<a name="line552"></a>     * <li><b> smoker </b> - možnost kouření v objektu
<a name="line553"></a>     * <ul>
<a name="line554"></a>     * <li><b> 0 </b> - nesmí se kouřit </li>
<a name="line555"></a>     * <li><b> 1 </b> - může se kouřit </li>
<a name="line556"></a>     * </ul>
<a name="line557"></a>     * </li>
<a name="line558"></a>     * <li><b> date_inserted </b> - datum vložení kampaně</li>
<a name="line559"></a>     * <li><b> address </b> - neformátovaná adresa objektu </li>
<a name="line560"></a>     * <li><b> country </b> - adresa - země </li>
<a name="line561"></a>     * <li><b> locality </b> - adresa lokalita (Praha, Brno) </li>
<a name="line562"></a>     * <li><b> neighborhood </b> - adresa - městská čtvrť (Dejvice, Vinohrady) </li>
<a name="line563"></a>     * <li><b> postal_code </b> - adresa - PSČ </li>
<a name="line564"></a>     * <li><b> postal_town </b> - adresa - městská část (Praha 6, Praha 2) </li>
<a name="line565"></a>     * <li><b> route </b> - adresa - ulice </li>
<a name="line566"></a>     * <li><b> street_number </b> - adresa - číslo domu </li>
<a name="line567"></a>     * <li><b> sublocality </b> - adresa - podoblast (Praha 6, Praha 2) </li>
<a name="line568"></a>     * <li><b> administrative_area_level_1 </b> - adresa - kraj </li>
<a name="line569"></a>     * <li><b> administrative_area_level_2 </b> - adresa - okres </li>
<a name="line570"></a>     * <li><b> premise </b> - adresa - orientační číslo </li>
<a name="line571"></a>     * <li><b> establishment </b> - adresa - upřesnění typu budovy </li>
<a name="line572"></a>     * <li><b> point_of_interest </b> - adresa - památka </li>
<a name="line573"></a>     * <li><b> lat </b> - adresa - zeměpisná šířka </li>
<a name="line574"></a>     * <li><b> lng </b> - adresa - zeměpisná délka </li>
<a name="line575"></a>     * </ul>
<a name="line576"></a>     *
<a name="line577"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line578"></a>     */
<a name="line579"></a>    public function getFilteredAds()
<a name="line580"></a>    {
<a name="line581"></a>        echo json_encode($this->user_model->getFilteredAds(), JSON_UNESCAPED_UNICODE);
<a name="line582"></a>    }
<a name="line583"></a>
<a name="line584"></a>    /**
<a name="line585"></a>     * Function getUserObjects
<a name="line586"></a>     *
<a name="line587"></a>     *  vrací JSON všechny objekty, které patří uživateli.
<a name="line588"></a>     * Ke každému objektu vrací seznam kampaní, které na daném objektu jsou.
<a name="line589"></a>     * Ke každé kampani vrací počet uživatelů, kteří ji sledují
<a name="line590"></a>     *
<a name="line591"></a>     * <li><b> object_id_pk </b> - ID objektu</li>
<a name="line592"></a>     * <li><b> address </b> - neformátovaná adresa objektu </li>
<a name="line593"></a>     * <li><b> country </b> - adresa - země </li>
<a name="line594"></a>     * <li><b> locality </b> - adresa lokalita (Praha, Brno) </li>
<a name="line595"></a>     * <li><b> neighborhood </b> - adresa - městská čtvrť (Dejvice, Vinohrady) </li>
<a name="line596"></a>     * <li><b> postal_code </b> - adresa - PSČ </li>
<a name="line597"></a>     * <li><b> postal_town </b> - adresa - městská část (Praha 6, Praha 2) </li>
<a name="line598"></a>     * <li><b> route </b> - adresa - ulice </li>
<a name="line599"></a>     * <li><b> street_number </b> - adresa - číslo domu </li>
<a name="line600"></a>     * <li><b> sublocality </b> - adresa - podoblast (Praha 6, Praha 2) </li>
<a name="line601"></a>     * <li><b> administrative_area_level_1 </b> - adresa - kraj </li>
<a name="line602"></a>     * <li><b> administrative_area_level_2 </b> - adresa - okres </li>
<a name="line603"></a>     * <li><b> premise </b> - adresa - orientační číslo </li>
<a name="line604"></a>     * <li><b> establishment </b> - adresa - upřesnění typu budovy </li>
<a name="line605"></a>     * <li><b> point_of_interest </b> - adresa - památka </li>
<a name="line606"></a>     * <li><b> lat </b> - adresa - zeměpisná šířka </li>
<a name="line607"></a>     * <li><b> lng </b> - adresa - zeměpisná délka </li>
<a name="line608"></a>     * <li><b> ad </b> - seznam kampaní nad daným objektem</li>
<a name="line609"></a>     * <ul>
<a name="line610"></a>     *      <li><b> ad_id_pk </b> - id kampaně</li>
<a name="line611"></a>     *      <li><b> ad_price </b> - cena kampaně</li>
<a name="line612"></a>     *      <li><b> active </b> - aktivní či neaktivní kampaň
<a name="line613"></a>     *      <ul>
<a name="line614"></a>     *           <li><b> 0 </b> - neaktivní </li>
<a name="line615"></a>     *           <li><b> 1 </b> - aktivní </li>
<a name="line616"></a>     *      </ul>
<a name="line617"></a>     *      <li><b> ad_title </b> - textový titulek kampaně</li>
<a name="line618"></a>     *      <li><b> ad_followers </b> - počet lidí, sledujících danou kampaň</li>
<a name="line619"></a>     * </ul>
<a name="line620"></a>     *
<a name="line621"></a>     * </li>
<a name="line622"></a>     *
<a name="line623"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line624"></a>     */
<a name="line625"></a>    public function getUserObjects()
<a name="line626"></a>    {
<a name="line627"></a>        echo json_encode($this->user_model->getUserObjects(), JSON_UNESCAPED_UNICODE);
<a name="line628"></a>    }
<a name="line629"></a>
<a name="line630"></a>    /**
<a name="line631"></a>     * Function logout
<a name="line632"></a>     *
<a name="line633"></a>     *  odhlásí uživatele zrušením aktuální session.
<a name="line634"></a>     *
<a name="line635"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line636"></a>     */
<a name="line637"></a>    public function logout()
<a name="line638"></a>    {
<a name="line639"></a>        $this->session->sess_destroy();
<a name="line640"></a>    }
<a name="line641"></a>
<a name="line642"></a>    /**
<a name="line643"></a>     * Function login
<a name="line644"></a>     *
<a name="line645"></a>     * Přihlásí uživatele, vytvořením nové session s jeho údaji.
<a name="line646"></a>     * <ul>
<a name="line647"></a>     * <li><b> logged_in <b>- údaj, že uživatel je přihlášen </li>
<a name="line648"></a>     * <li><b> email <b>- uživatelův email </li>
<a name="line649"></a>     * <li><b> firstname <b>- křestní jméno uživatele </li>
<a name="line650"></a>     * <li><b> lastname <b>- příjmení uživatele </li>
<a name="line651"></a>     *</ul>
<a name="line652"></a>     *
<a name="line653"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line654"></a>     */
<a name="line655"></a>    public function login()
<a name="line656"></a>    {
<a name="line657"></a>        $email = $this->input->post('login_email');
<a name="line658"></a>        $password = $this->input->post('login_password');
<a name="line659"></a>        if ($this->user_model->login($email, $password)) {
<a name="line660"></a>            $this->user_model->startSession($email);
<a name="line661"></a>        };
<a name="line662"></a>    }
<a name="line663"></a>
<a name="line664"></a>    /**
<a name="line665"></a>     * Function setFilter
<a name="line666"></a>     *
<a name="line667"></a>     * Nastaví nový filtr uživatele na základě přijatých POST parametrů
<a name="line668"></a>     * <ul>
<a name="line669"></a>     * <li>POST<b> filter_area </b>- adresa </li>
<a name="line670"></a>     * <li>POST<b> filter_price_from </b>- cena od </li>
<a name="line671"></a>     * <li>POST<b> filter_price_to </b>- cena do </li>
<a name="line672"></a>     *</ul>
<a name="line673"></a>     *
<a name="line674"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line675"></a>     */
<a name="line676"></a>    public function setFilter()
<a name="line677"></a>    {
<a name="line678"></a>        $area = $this->input->post('filter_area');
<a name="line679"></a>        $price_from = $this->input->post('filter_price_from');
<a name="line680"></a>        $price_to = $this->input->post('filter_price_to');
<a name="line681"></a>        $this->user_model->setFilter($area, $price_from, $price_to);
<a name="line682"></a>    }
<a name="line683"></a>
<a name="line684"></a>    /**
<a name="line685"></a>     * Function follow
<a name="line686"></a>     *
<a name="line687"></a>     * Aktuálnímu uživateli umístí danou kampaň do jeho sledovaných kampaní.
<a name="line688"></a>     *
<a name="line689"></a>     * @param (int) (adId) ID kampaně určené ke sledování
<a name="line690"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line691"></a>     */
<a name="line692"></a>    public function follow($adId)
<a name="line693"></a>    {
<a name="line694"></a>        $this->user_model->follow($adId);
<a name="line695"></a>    }
<a name="line696"></a>
<a name="line697"></a>    /**
<a name="line698"></a>     * Function unfollow
<a name="line699"></a>     *
<a name="line700"></a>     * Aktuálnímu uživateli odebere danou kampaň z jeho sledovaných kampaní.
<a name="line701"></a>     *
<a name="line702"></a>     * @param (int) (adId) ID kampaně určené k odstranění ze sledovaných kampaní
<a name="line703"></a>     */
<a name="line704"></a>    public function unfollow($adId)
<a name="line705"></a>    {
<a name="line706"></a>        $this->user_model->unfollow($adId);
<a name="line707"></a>    }
<a name="line708"></a>
<a name="line709"></a>    /**
<a name="line710"></a>     * Function saveObject
<a name="line711"></a>     *
<a name="line712"></a>     * Vytvoření nového objektu (dům, byt) ze zadaných GET parametrů
<a name="line713"></a>     *<ul>
<a name="line714"></a>     * <li>GET<b> object_address </b>- JSON adresy objektu (google formát adresy) </li>
<a name="line715"></a>     * <li>GET<b> object_equipment </b>- JSON vybavení objektu </li>
<a name="line716"></a>     * <li>GET<b> object_floor </b>- podlaží objektu (dům, byt) </li>
<a name="line717"></a>     * <li>GET<b> object_rooms </b>- JSON počet a typů místností </li>
<a name="line718"></a>     *
<a name="line719"></a>     * <li>GET<b> object_reconstruction_date </b>- DATUM rekonstrukce bytu </li>
<a name="line720"></a>     * <li>GET<b> object_floor_count </b>- počet pater objektu (dům, byt) </li>
<a name="line721"></a>     * <li>GET<b> object_pet </b>- je povoleno domácí zvíře </li>
<a name="line722"></a>     * <li>GET<b> object_smoker </b>- je v objektu povoleno kouřit </li>
<a name="line723"></a>     *</ul>
<a name="line724"></a>     * při vytvoření objektu bere metoda v úvahu $_FILES globální proměnnou. Slouží ke vložení fotek k objektu.
<a name="line725"></a>     *
<a name="line726"></a>     * Metoda vrátí JSON pole vytvořených místností.
<a name="line727"></a>     *
<a name="line728"></a>     * <h4>Formát JSON výstupu</h4>
<a name="line729"></a>     *<ul>
<a name="line730"></a>     * <li><b>room_type</b> - ID typu místnosti</li>
<a name="line731"></a>     * <li><b>room_number</b> - počet vložených místností tohoto typu (číslováno od 0)</li>
<a name="line732"></a>     * <li><b>room_object_id</b> - ID vložené místnosti</li>
<a name="line733"></a>     * </ul>
<a name="line734"></a>     * <ul>
<a name="line735"></a>     * <li><b>object_id</b> - ID vloženého objektu</li>
<a name="line736"></a>     * </ul>
<a name="line737"></a>     *
<a name="line738"></a>     * <h4>Příklad výstupu</h4>
<a name="line739"></a>     * {"0":{"room_type":1,"room_number":1,"room_object_id":410},"1":{"room_type":3,"room_number":0,"room_object_id":411},"object_id":412},"object_id":140}
<a name="line740"></a>     *
<a name="line741"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line742"></a>     *
<a name="line743"></a>     */
<a name="line744"></a>    public function saveObject()
<a name="line745"></a>    {
<a name="line746"></a>        $address = json_decode($this->input->get('object_address'));
<a name="line747"></a>        $equipment = json_decode($this->input->get('object_equipment'));
<a name="line748"></a>        $floor = $this->input->get('object_floor');
<a name="line749"></a>        $rooms = json_decode($this->input->get('object_rooms'));
<a name="line750"></a>
<a name="line751"></a>        $reconstruction_date = $this->input->get('object_reconstruction_date');
<a name="line752"></a>        $floor_area = $this->input->get('object_floor_area');
<a name="line753"></a>        $heat_type = $this->input->get('object_heat_type');
<a name="line754"></a>        $construction_type = $this->input->get('object_construction_type');
<a name="line755"></a>        $floor_count = $this->input->get('object_floor_count');
<a name="line756"></a>        $pet = $this->input->get('object_pet');
<a name="line757"></a>        $smoker = $this->input->get('object_smoker');
<a name="line758"></a>
<a name="line759"></a>        $returnArr = $this->object_model->saveObject($address, $floor, $floor_area, $reconstruction_date, $heat_type, $construction_type, $floor_count, $pet, $smoker, $rooms, $equipment);
<a name="line760"></a>        $objectId = $returnArr['object_id'];
<a name="line761"></a>        mkdir(APPPATH . '../galleries/' . $objectId, 0777, TRUE);
<a name="line762"></a>        mkdir(APPPATH . '../galleries/' . $objectId . '/_thumbs/', 0777, TRUE);
<a name="line763"></a>
<a name="line764"></a>        echo json_encode(array_values($returnArr), JSON_UNESCAPED_UNICODE);
<a name="line765"></a>    }
<a name="line766"></a>
<a name="line767"></a>
<a name="line768"></a>    /**
<a name="line769"></a>     * Function editObject
<a name="line770"></a>     *
<a name="line771"></a>     * Editace existujícího objektu (dům, byt) podle zadaných GET parametrů
<a name="line772"></a>     *<ul>
<a name="line773"></a>     * <li>GET<b> object_equipment </b>- JSON vybavení objektu </li>
<a name="line774"></a>     * <li>GET<b> object_floor </b>- podlaží objektu (dům, byt) </li>
<a name="line775"></a>     * <li>GET<b> object_rooms </b>- JSON počet a typů místností </li>
<a name="line776"></a>     *
<a name="line777"></a>     * <li>GET<b> object_reconstruction_date </b>- DATUM rekonstrukce bytu </li>
<a name="line778"></a>     * <li>GET<b> object_floor_count </b>- počet pater objektu (dům, byt) </li>
<a name="line779"></a>     * <li>GET<b> object_pet </b>- je povoleno domácí zvíře </li>
<a name="line780"></a>     * <li>GET<b> object_smoker </b>- je v objektu povoleno kouřit </li>
<a name="line781"></a>     *</ul>
<a name="line782"></a>     *
<a name="line783"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line784"></a>     */
<a name="line785"></a>    public function editObject($objectId)
<a name="line786"></a>    {
<a name="line787"></a>//        $address = json_decode($this->input->get('object_address'));
<a name="line788"></a>        $equipment = json_decode($this->input->get('object_equipment'));
<a name="line789"></a>        $floor = $this->input->get('object_floor');
<a name="line790"></a>        $rooms = json_decode($this->input->get('object_rooms'));
<a name="line791"></a>
<a name="line792"></a>        $reconstruction_date = $this->input->get('object_reconstruction_date');
<a name="line793"></a>        $floor_area = $this->input->get('object_floor_area');
<a name="line794"></a>        $heat_type = $this->input->get('object_heat_type');
<a name="line795"></a>        $construction_type = $this->input->get('object_construction_type');
<a name="line796"></a>        $floor_count = $this->input->get('object_floor_count');
<a name="line797"></a>        $pet = $this->input->get('object_pet');
<a name="line798"></a>        $smoker = $this->input->get('object_smoker');
<a name="line799"></a>        $this->object_model->editObject($objectId, $floor, $floor_area, $reconstruction_date, $heat_type, $construction_type, $floor_count, $pet, $smoker, $rooms, $equipment);
<a name="line800"></a>    }
<a name="line801"></a>
<a name="line802"></a>
<a name="line803"></a>    /**
<a name="line804"></a>     * Function saveTmpRooms
<a name="line805"></a>     *
<a name="line806"></a>     * Uloží dočasné počty a typy místností na základě POST parametru
<a name="line807"></a>     * <ul>
<a name="line808"></a>     * <li> POST JSON <b>tmpRooms </b>- typy místností a jejich počty </li>
<a name="line809"></a>     *</ul>
<a name="line810"></a>     * Slouží při práci s formulářem k ukládání uživatelových dočasných dat (místností), před úplným uložením vytvářeného nebo editovaného objektu.
<a name="line811"></a>     *
<a name="line812"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line813"></a>     */
<a name="line814"></a>    public function saveTmpRooms()
<a name="line815"></a>    {
<a name="line816"></a>        $roomArr = json_decode($this->input->post('tmpRooms'));
<a name="line817"></a>        $this->user_model->saveTmpRooms($roomArr);
<a name="line818"></a>    }
<a name="line819"></a>
<a name="line820"></a>    /**
<a name="line821"></a>     * Function saveTmpEquipment
<a name="line822"></a>     *
<a name="line823"></a>     * Uloží vybavení objektu v průběhu vytváření nového objektu na základě POST parametru
<a name="line824"></a>     * <ul>
<a name="line825"></a>     * <li> POST JSON <b>tmpEquipment </b>- typy místností a jejich počty </li>
<a name="line826"></a>     *</ul>
<a name="line827"></a>     * Slouží při práci s formulářem k ukládání uživatelových dočasných dat (vybavení), před úplným uložením vytvářeného nebo editovaného objektu.
<a name="line828"></a>     *
<a name="line829"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line830"></a>     */
<a name="line831"></a>    public function saveTmpEquipment()
<a name="line832"></a>    {
<a name="line833"></a>        $equipmentArr = json_decode($this->input->post('tmpEquipment'));
<a name="line834"></a>        $this->user_model->saveTmpEquipment($equipmentArr);
<a name="line835"></a>    }
<a name="line836"></a>
<a name="line837"></a>    /**
<a name="line838"></a>     * Function removeTmpRoom
<a name="line839"></a>     *
<a name="line840"></a>     * Odstraní dočasný počet a typ dané místnosti na základě GET parametru
<a name="line841"></a>     * <ul>
<a name="line842"></a>     * <li>GET <b> roomId </b>- ID typu místnosti, který se má odstranit z uživatelova dočasného výběru </li>
<a name="line843"></a>     *</ul>
<a name="line844"></a>     * Slouží při práci s formulářem k editaci uživatelových dočasných dat, před úplným uložením vytvářeného nebo editovaného objektu.
<a name="line845"></a>     *
<a name="line846"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line847"></a>     */
<a name="line848"></a>
<a name="line849"></a>    public function removeTmpRoom()
<a name="line850"></a>    {
<a name="line851"></a>        $roomId = $this->input->get('roomId');
<a name="line852"></a>        $this->user_model->removeTmpRoom($roomId);
<a name="line853"></a>    }
<a name="line854"></a>
<a name="line855"></a>
<a name="line856"></a>    /**
<a name="line857"></a>     * Function clearTmpRoom
<a name="line858"></a>     *
<a name="line859"></a>     * Odstraní dočasný počet a typ všech místností momentálně přihlášeného uživatele.
<a name="line860"></a>     *
<a name="line861"></a>     * Slouží při práci s formulářem k editaci uživatelových dočasných dat, před úplným uložením vytvářeného nebo editovaného objektu.
<a name="line862"></a>     *
<a name="line863"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line864"></a>     */
<a name="line865"></a>    public function clearTmpRooms()
<a name="line866"></a>    {
<a name="line867"></a>        $this->user_model->clearTmpRooms();
<a name="line868"></a>    }
<a name="line869"></a>
<a name="line870"></a>    /**
<a name="line871"></a>     * Function clearTmpRoom
<a name="line872"></a>     *
<a name="line873"></a>     * Odstraní dočasné vybavení tvořeného objektu momentálně přihlášeného uživatele.
<a name="line874"></a>     *
<a name="line875"></a>     * Slouží při práci s formulářem k editaci uživatelových dočasných dat, před úplným uložením vytvářeného nebo editovaného objektu.
<a name="line876"></a>     *
<a name="line877"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line878"></a>     */
<a name="line879"></a>    public function clearTmpEquipment()
<a name="line880"></a>    {
<a name="line881"></a>        $this->user_model->clearTmpEquipment();
<a name="line882"></a>    }
<a name="line883"></a>
<a name="line884"></a>
<a name="line885"></a>    /**
<a name="line886"></a>     * Function removeTmpEquipment
<a name="line887"></a>     *
<a name="line888"></a>     * Odstraní dočasný počet a typ dané místnosti na základě GET parametru
<a name="line889"></a>     * <ul>
<a name="line890"></a>     * <li>GET <b> roomId </b>- ID typu místnosti, který se má odstranit z uživatelova dočasného výběru </li>
<a name="line891"></a>     *</ul>
<a name="line892"></a>     * Slouží při práci s formulářem k editaci uživatelových dočasných dat, před úplným uložením vytvářeného nebo editovaného objektu.
<a name="line893"></a>     *
<a name="line894"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line895"></a>     */
<a name="line896"></a>    public function removeTmpEquipment()
<a name="line897"></a>    {
<a name="line898"></a>        $equipmentId = $this->input->get('equipmentId');
<a name="line899"></a>        $this->user_model->removeTmpEquipment($equipmentId);
<a name="line900"></a>    }
<a name="line901"></a>
<a name="line902"></a>    /**
<a name="line903"></a>     * Function pairUserObject
<a name="line904"></a>     *
<a name="line905"></a>     * Spáruje uživatele s již existujícím bytem na základě POST parametrů.
<a name="line906"></a>     * <ul>
<a name="line907"></a>     * <li> POST <b> objectId </b>- ID objektu určeného ke spárování </li>
<a name="line908"></a>     * <li> POST <b>lat </b>- latitude dnaného objektu </li>
<a name="line909"></a>     * <li> POST <b>lng </b>- longitude dnaného objektu </li>
<a name="line910"></a>     * <li> POST <b>inputFloor </b>- patro daného objektu </li>
<a name="line911"></a>     *</ul>
<a name="line912"></a>     * parametry slouží k ověření, že uživatel skutečně objekt zná a že se nejedná o falešné propojení
<a name="line913"></a>     *
<a name="line914"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line915"></a>     */
<a name="line916"></a>    public function pairUserObject()
<a name="line917"></a>    {
<a name="line918"></a>        $objectId = $this->input->post('objectId');
<a name="line919"></a>        $lat = $this->input->post('lat');
<a name="line920"></a>        $lng = $this->input->post('lng');
<a name="line921"></a>        $inputFloor = $this->input->post('inputFloor');
<a name="line922"></a>        $this->user_model->pairUserObject($objectId, $inputFloor, $lat, $lng);
<a name="line923"></a>    }
<a name="line924"></a>
<a name="line925"></a>
<a name="line926"></a>    /**
<a name="line927"></a>     * Function sendMessage
<a name="line928"></a>     *
<a name="line929"></a>     * aktuální uživatel odešle zprávu cílovému uživateli na základě POST parametrů.
<a name="line930"></a>     * <ul>
<a name="line931"></a>     * <li> POST <b> target_user </b>- ID cílového uživatele </li>
<a name="line932"></a>     * <li> POST <b> message </b>- zpráva, kterou aktuální uživatel chce odeslat </li>
<a name="line933"></a>     *</ul>
<a name="line934"></a>     *
<a name="line935"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line936"></a>     */
<a name="line937"></a>    public function sendMessage()
<a name="line938"></a>    {
<a name="line939"></a>        $targetUserId = $this->input->get('target_user');
<a name="line940"></a>        $message = $this->input->get('message');
<a name="line941"></a>        $this->user_model->sendMessage($targetUserId, $message);
<a name="line942"></a>    }
<a name="line943"></a>
<a name="line944"></a>
<a name="line945"></a>    /**
<a name="line946"></a>     * Function setMessageStatus
<a name="line947"></a>     *
<a name="line948"></a>     * Nastaví status konverzace na základě GET parametrů
<a name="line949"></a>     * <ul>
<a name="line950"></a>     * <li>GET <b> conversation_id </b>- ID konverzace, které se má status nastavit </li>
<a name="line951"></a>     * <li>GET <b> status </b> - status zprávy (0,1) </li>
<a name="line952"></a>     * <li>0 - přečtená </li>
<a name="line953"></a>     * <li>1 - nepřečtená </li>
<a name="line954"></a>     * </ul>
<a name="line955"></a>     *
<a name="line956"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line957"></a>     */
<a name="line958"></a>    public function setMessageStatus()
<a name="line959"></a>    {
<a name="line960"></a>        $status = $this->input->get('status');
<a name="line961"></a>        $conversationId = $this->input->get('conversation_id');
<a name="line962"></a>        echo $this->user_model->setMessageStatus($conversationId, $status);
<a name="line963"></a>    }
<a name="line964"></a>
<a name="line965"></a>    /**
<a name="line966"></a>     * Function unlinkObject
<a name="line967"></a>     *
<a name="line968"></a>     * Aktuálnímu uzivateli smaže propojení s daným objektem (byt, dům).
<a name="line969"></a>     *
<a name="line970"></a>     * @param (int) (objectId) ID objektu
<a name="line971"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line972"></a>     */
<a name="line973"></a>    public function unlinkObject($objectId)
<a name="line974"></a>    {
<a name="line975"></a>        $this->object_model->unlinkObject($objectId);
<a name="line976"></a>    }
<a name="line977"></a>
<a name="line978"></a>    /**
<a name="line979"></a>     * Function saveGallery
<a name="line980"></a>     *
<a name="line981"></a>     * Uloží záznam o nové galerii do databáze na základě GET parametru a vrrátí ID galerie.
<a name="line982"></a>     *
<a name="line983"></a>     * <ul>
<a name="line984"></a>     * <li>GET <b> object_id </b>- ID objektu </li>
<a name="line985"></a>     * </ul>
<a name="line986"></a>     *
<a name="line987"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line988"></a>     */
<a name="line989"></a>    public function saveGallery()
<a name="line990"></a>    {
<a name="line991"></a>        $objectId = $this->input->get('object_id');
<a name="line992"></a>        echo $this->object_model->saveGallery($objectId);
<a name="line993"></a>    }
<a name="line994"></a>
<a name="line995"></a>
<a name="line996"></a>    /**
<a name="line997"></a>     * Function saveRoomPhoto
<a name="line998"></a>     *
<a name="line999"></a>     * Uloží záznam o nové galerii do databáze na základě GET parametru a vrrátí ID galerie.
<a name="line1000"></a>     *
<a name="line1001"></a>     * <ul>
<a name="line1002"></a>     * <li>GET <b> photo_number </b>- číslo fotky </li>
<a name="line1003"></a>     * <li>GET <b> object_room_id </b>- ID místnosti připojené k objektu </li>
<a name="line1004"></a>     * <li>GET <b> gallery_id </b>- ID galerie připojené k objektu </li>
<a name="line1005"></a>     * </ul>
<a name="line1006"></a>     *
<a name="line1007"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line1008"></a>     */
<a name="line1009"></a>    public function saveRoomPhoto()
<a name="line1010"></a>    {
<a name="line1011"></a>        $photoNumber = $this->input->get('photo_number');
<a name="line1012"></a>        $objectRoomId = $this->input->get('object_room_id');
<a name="line1013"></a>        $galleryId = $this->input->get('gallery_id');
<a name="line1014"></a>        $this->object_model->saveRoomPhoto($photoNumber, $objectRoomId, $galleryId);
<a name="line1015"></a>    }
<a name="line1016"></a>
<a name="line1017"></a>    /**
<a name="line1018"></a>     * Function setFrontPhoto
<a name="line1019"></a>     *
<a name="line1020"></a>     * Nastaví úvodní fotografii galerie na základě GET parametrů.
<a name="line1021"></a>     *
<a name="line1022"></a>     * <ul>
<a name="line1023"></a>     * <li>GET <b> gallery_id </b>- ID galerie připojené k objektu </li>
<a name="line1024"></a>     * <li>GET <b> photo_id </b>- ID fotografie, kterou chceme mít jako úvodní </li>
<a name="line1025"></a>     * </ul>
<a name="line1026"></a>     *
<a name="line1027"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line1028"></a>     */
<a name="line1029"></a>    public function setFrontPhoto()
<a name="line1030"></a>    {
<a name="line1031"></a>        $galleryId = $this->input->get('gallery_id');
<a name="line1032"></a>        $photoId = $this->input->get('photo_id');
<a name="line1033"></a>        $this->object_model->setFrontPhoto($galleryId, $photoId);
<a name="line1034"></a>    }
<a name="line1035"></a>
<a name="line1036"></a>    /**
<a name="line1037"></a>     * Function getObjectGallery
<a name="line1038"></a>     *
<a name="line1039"></a>     * Vrátí JSON data o galerii k objektu na základě vsupního parametru
<a name="line1040"></a>     *
<a name="line1041"></a>     * <Formát výstupu>
<a name="line1042"></a>     * <ul>
<a name="line1043"></a>     * <li><b> gallery_id_pk </b>- ID galerie </li>
<a name="line1044"></a>     * <li><b> front_photo_id_fk </b>- číslo fotografie, která je zvolená za úvodní ke galerii </li>
<a name="line1045"></a>     * <li><b> object_id_fk </b>- ID objektu, ke kterému galerie patří </li>
<a name="line1046"></a>     * <li><b> time_inserted </b>- DATETIME vytvoření galerie </li>
<a name="line1047"></a>     * </ul>
<a name="line1048"></a>     *
<a name="line1049"></a>     * @param (int) (galleryId) ID galerie
<a name="line1050"></a>     *
<a name="line1051"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line1052"></a>     */
<a name="line1053"></a>    public function getObjectGallery($galleryId)
<a name="line1054"></a>    {
<a name="line1055"></a>        echo json_encode($this->object_model->getObjectGallery($galleryId), JSON_UNESCAPED_UNICODE);
<a name="line1056"></a>    }
<a name="line1057"></a>
<a name="line1058"></a>
<a name="line1059"></a>    /**
<a name="line1060"></a>     * Function getRoomPhotos
<a name="line1061"></a>     *
<a name="line1062"></a>     * Vrátí JSON seznam fotografií patřících v objektu k dané místnosti uvedené v GET parametru.
<a name="line1063"></a>     *
<a name="line1064"></a>     * <ul>
<a name="line1065"></a>     * <li>GET <b> object_room_id </b>- ID galerie připojené k objektu </li>
<a name="line1066"></a>     * </ul>
<a name="line1067"></a>     *
<a name="line1068"></a>     * <Formát výstupu>
<a name="line1069"></a>     * <ul>
<a name="line1070"></a>     * <li><b> photo_id_pk </b>- ID fotografie </li>
<a name="line1071"></a>     * <li><b> gallery_id_fk </b>- ID galerie </li>
<a name="line1072"></a>     * <li><b> path </b>- číslo fotografie v adresáři </li>
<a name="line1073"></a>     * <li><b> object_room_id_fk </b>- ID místnosti </li>
<a name="line1074"></a>     * </ul>
<a name="line1075"></a>     *
<a name="line1076"></a>     * @author Bc.Adam Mrázek - mrazek.adam@gmail.com
<a name="line1077"></a>     */
<a name="line1078"></a>    public function getRoomPhotos()
<a name="line1079"></a>    {
<a name="line1080"></a>        $objectRoomId = $this->input->get('object_room_id');
<a name="line1081"></a>        echo json_encode($this->object_model->getRoomPhotos($objectRoomId), JSON_UNESCAPED_UNICODE);
<a name="line1082"></a>    }
<a name="line1083"></a>}</pre>
<div class="header">
<h1>Unknown</h1>
<ul>
<li><a href="../overview-summary.html">Overview</a></li>
<li>Package</li><li>Class</li><li>Tree</li><li><a href="../overview-files.html">Files</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../todo-list.html">Todo</a></li>
<li><a href="../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../index.html" target="_top">Frames</a>
<a href="../source\user_api.php.html" target="_top">No frames</a>
</div>
<hr>

<p id="footer">This document was generated by <a href="http://peej.github.com/phpdoctor/">PHPDoctor: The PHP Documentation Creator</a></p>

</body>

</html>